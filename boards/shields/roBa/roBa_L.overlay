#include "roBa.dtsi"

&kscan0 {
        col-gpios
            = <&xiao_d 10 GPIO_ACTIVE_HIGH>
            , <&xiao_d 9 GPIO_ACTIVE_HIGH> 
            , <&xiao_d 8 GPIO_ACTIVE_HIGH> 
            , <&xiao_d 7 GPIO_ACTIVE_HIGH> 
            , <&gpio0 10 GPIO_ACTIVE_HIGH>
            , <&gpio0 9 GPIO_ACTIVE_HIGH>
            ;
};

&left_encoder {
    status = "okay";
};
/ {
    encoders {
        compatible = "zmk,encoders";

        encoder0: encoder_0 {
            compatible = "alps,ec11";

            // ▼エンコーダのA/B相を XIAO の空きDピンへ
            //   D3 と D4 が空いている前提（別のDピンを使うなら数字だけ変えてOK）
            a-gpios = <&xiao_d 3 (GPIO_ACTIVE_HIGH | GPIO_PULL_UP)>;
            b-gpios = <&xiao_d 4 (GPIO_ACTIVE_HIGH | GPIO_PULL_UP)>;

            // 1デテントあたりのパルス数（EC11なら 4 が一般的）
            resolution = <4>;

            status = "okay";
        };
    };
};
